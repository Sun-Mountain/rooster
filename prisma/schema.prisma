generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Contact {
  EMAIL
  EMAIL2
  CALL
  TEXT
}

enum Pronouns {
  SHE_HER
  HE_HIM
  THEY_THEM
  OTHER
  NONE_SPECIFIED
}

enum Role {
  ADMIN
  SUPER
  USER
}

enum Status {
  ACTIVE
  INACTIVE
  PENDING
}

model EmergencyContact {
  id            String   @id @default(cuid())
  userId        String
  firstName     String
  lastName      String
  relationship  String
  phoneNumber   String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId])
  @@map("emergency_contacts")
}

model UserContact {
  id                      String   @id @default(cuid())
  userId                  String
  preferredContact        Contact
  email2                  String
  phoneNumber             String
  secondEmail             String?
  addressLine1            String
  addressLine2            String?
  city                    String
  state                   String
  zipCode                 String
  country                 String
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId])
  @@map("contact_info")
}

model User {
  id                String  @id @default(cuid())
  email             String
  emailVerified     Boolean
  name              String?
  firstName         String
  lastName          String
  pronouns          Pronouns @default(NONE_SPECIFIED)
  otherPronouns     String?
  password          String
  contactInfo       UserContact?
  emergencyContact  EmergencyContact?
  role              Role    @default(USER)
  status            Status  @default(ACTIVE)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  sessions          Session[]
  accounts          Account[]

  @@unique([email])
  @@map("users")
}

model Account {
  id                    String    @id @default(cuid())
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime
  updatedAt             DateTime

  @@map("account")
}

model Session {
  id        String   @id @default(cuid())
  expiresAt DateTime
  token     String
  createdAt DateTime
  updatedAt DateTime
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@map("session")
}

model Verification {
  id         String    @id @default(cuid())
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime?
  updatedAt  DateTime?

  @@map("verification")
}